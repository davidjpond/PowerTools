[
~[tlist_sql;
SELECT a1.dcid
FROM attendance a1
LEFT JOIN students s1
ON a1.studentid = s1.id
LEFT JOIN attendance_code a2
ON a1.attendance_codeid = a2.id
LEFT JOIN cc c1
ON a1.ccid = c1.id
LEFT JOIN period p1
ON a1.periodid = p1.id
LEFT JOIN schools s2
ON a1.schoolid = s2.school_number
LEFT JOIN sections s3
ON abs(c1.sectionid) = s3.id
AND c1.sectionid != 0
LEFT JOIN courses c2
ON c1.course_number = c2.course_number
WHERE (
attendance_codeid IS NULL
~[if.~(gpv.NoStudent)=1]OR s1.id IS NULL[/if]
~[if.~(gpv.NoAttCode)=1]OR a2.id IS NULL[/if]
~[if.~(gpv.NoCC)=1]OR (c1.id IS NULL
AND a1.ccid != 0)[/if]
~[if.~(gpv.NoSection)=1]OR (s3.ID IS NULL
AND abs(c1.sectionid) != 0)[/if]
~[if.~(gpv.NoCourse)=1]OR (c2.course_number IS NULL
AND c1.course_number IS NOT NULL)[/if]
~[if.~(gpv.NoPeriod)=1]OR (p1.id IS NULL
AND a1.periodid != 0)[/if]
~[if#curschool.~(v.curschoolid)=0]
~[if#noSchool.~(gpv.noSchool)=1]OR s2.school_number IS NULL[/if#noSchool]
[/if#curschool]
)
~[if.is.a.school]AND a1.schoolid = ~[v.curschoolid][/if.is.a.school]
ORDER BY a1.ID
]
{
"dcid" : "~(a1.dcid)"
},
[/tlist_sql]
{}
]